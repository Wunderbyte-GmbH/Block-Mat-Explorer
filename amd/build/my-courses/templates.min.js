define("block_mat_explorer/my-courses/templates",["exports","core/notification","jquery"],(function(_exports,_notification,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.courseCardTemplate=void 0,_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery);_exports.courseCardTemplate=values=>{const elementDefinition=`\n  <div class="card mat-card ${values.userEnrolled?"to-course":"enrol-into-course"}" data-id="${values.id}" tabindex="0">\n      ${courseCardFrontTemplate(values)}\n  </div>`,element=(0,_jquery.default)(elementDefinition),clickHandler=function(){let url;values.userEnrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):(url="/blocks/course_explorer/ajax/enrol_user_into_course.php?courseid="+values.id,fetch(url,{method:"GET"}).then((response=>response.json())).then((result=>(result.enrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):_notification.default.alert("Error",result.errormessage,"Close"),console.log(result)))).catch((error=>console.log(error))))};return element.click(clickHandler),element.keyup((event=>{event.originalEvent instanceof KeyboardEvent&&"enter"!==event.key.toLocaleLowerCase()||clickHandler()})),element};const truncateString=(str,length)=>str.length<=length?str:str.slice(0,length)+"...",courseCardFrontTemplate=_ref=>{var _topics;let{title:title,MCOriginal:MCOriginal,image:image,description:description,score:score,reviewsnum:reviewsnum,senderName:senderName,courseType:courseType,duration:duration,topics:topics,favourite:favourite}=_ref;title=truncateString(title,100);let courseCardDescription=(description=>""!==description.trim()?description:"lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit.")(description);courseCardDescription=truncateString(courseCardDescription,150),topics=null===(_topics=topics)||void 0===_topics?void 0:_topics.map((topic=>topic.value));return`\n          <div class="position-relative card-header p-0">\n            ${image?`<img src="${image}" class="card-img-top" alt="">`:'<img src="https://picsum.photos/2124" class="card-img-top" alt="">'}\n            ${MCOriginal?'<div class="course-card__label mc-original">MC-Original</div>':""}\n            <div class="d-flex flex-wrap text-muted mb-2 small rating">\n              <div class="d-flex align-items-center">\n                ${getRating(score,reviewsnum)}\n              </div>\n            </div>\n        </div>\n          <div class="card-body">\n            <div>\n                <span class="course-type">${courseType}</span>\n                <h2 class="course-title">${title}</h5>\n                <p class="card-text mb-1 sender">${senderName}</p>\n            </div>\n            <div class="mr-3 d-flex align-items-center duration">\n                <div>${duration}</div>\n            </div>\n          </div>\n    `},getRating=(score,reviewsnum)=>{let firstStarClass="fa-star-o",secondStarClass="fa-star-o",thirdStarClass="fa-star-o";return score&&((score*=.6)<.75?firstStarClass="fa-star-half-o":score<1.25?firstStarClass="fa-star":score<1.75?(firstStarClass="fa-star",secondStarClass="fa-star-half-o"):score<2.25?(firstStarClass="fa-star",secondStarClass="fa-star"):score<2.75?(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star-half-o"):(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star")),`<i class="fa ${firstStarClass}"></i>\n            <i class="fa ${secondStarClass}"></i>\n            <i class="fa ${thirdStarClass} mr-1"></i>\n            <span>(${reviewsnum=reviewsnum??0})</span>`}}));

//# sourceMappingURL=templates.min.js.map