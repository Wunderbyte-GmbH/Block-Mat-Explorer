define("block_mat_explorer/templates",["exports","core/notification"],(function(_exports,_notification){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.dropDownTemplate=_exports.courseCardTemplate=void 0,_notification=(obj=_notification)&&obj.__esModule?obj:{default:obj};_exports.courseCardTemplate=values=>{const elementDefinition=`\n    <div class="card mat-card ${values.userEnrolled?"to-course":"enrol-into-course"}" data-id="${values.id}" tabindex="0">\n        <div class="card-content"></div>\n    </div>`,element=$(elementDefinition),frontTemplate=courseCardFrontTemplate(values);element.find(".card-content").append(frontTemplate);const clickHandler=function(){let url;values.userEnrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):(url="/blocks/course_explorer/ajax/enrol_user_into_course.php?courseid="+values.id,fetch(url,{method:"GET"}).then((response=>response.json())).then((result=>(result.enrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):_notification.default.alert("Error",result.errormessage,"Close"),console.log(result)))).catch((error=>console.log(error))))};return element.click(clickHandler),element.keyup((event=>{event.originalEvent instanceof KeyboardEvent&&"enter"!==event.key.toLocaleLowerCase()||clickHandler()})),element};const truncateString=(str,length)=>str.length<=length?str:str.slice(0,length)+"...",courseCardFrontTemplate=_ref=>{let{title:title,mcoriginal:mcoriginal,image:image,description:description,score:score,reviewsnum:reviewsnum,senderName:senderName,mc_moodle_format:mc_moodle_format,mc_moodle_kursdauer:mc_moodle_kursdauer,mc_moodle_themen:mc_moodle_themen}=_ref;title=truncateString(title,100);let courseCardDescription=(description=>""!==description.trim()?description:"lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit.")(description);courseCardDescription=truncateString(courseCardDescription,150);const courseType=mc_moodle_format,duration=mc_moodle_kursdauer,topics=null==mc_moodle_themen?void 0:mc_moodle_themen.map((topic=>topic.value));return $(`\n    <div class="card-front">\n        <div class="mat-card__image">\n           ${image?'<img src="'+image+'" alt="">':'<img src="https://picsum.photos/2124" alt="">'}\n        </div>\n        <div class="mat-card__background"></div>\n        \n        ${mcoriginal?'<div class="mat-card__label mc-original">MINT-Campus-Original</div>':""}\n        \n        <div class="mat-card__content">\n            <small class="mat-card__sender-name">${senderName}</small>\n            <h3 class="mat-card__title">\n                ${title}        \n            </h3>\n            <div class="mat-card__quick-facts d-sm-flex justify-content-between flex-wrap">\n                <div class="d-flex align-items-center">\n                    <i class="fa fa-graduation-cap mr-1"></i>\n                    <span>${courseType}</span>\n                </div>\n                <div class="d-flex align-items-center">\n                    <i class="fa fa-clock-o mr-1"></i>\n                    <span>${duration}</span>\n                </div>\n                <div class="d-flex align-items-center">\n                    ${getRating(score,reviewsnum)}\n                </div>\n            </div>\n            <p class="mat-card__description">\n                ${courseCardDescription}\n            </p>\n            ${(null==topics?void 0:topics.length)>0?`<div class="mat-card__tags d-flex">\n                    <div class="d-flex align-items-center">\n                        <i class="fa fa-tag"></i>\n                    </div>\n                    <div>${topics.join(", ")}</div>\n                </div>`:""}\n        </div>\n    </div>`)},getRating=(score,reviewsnum)=>{let firstStarClass="fa-star-o",secondStarClass="fa-star-o",thirdStarClass="fa-star-o";return score&&((score*=.6)<.75?firstStarClass="fa-star-half-o":score<1.25?firstStarClass="fa-star":score<1.75?(firstStarClass="fa-star",secondStarClass="fa-star-half-o"):score<2.25?(firstStarClass="fa-star",secondStarClass="fa-star"):score<2.75?(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star-half-o"):(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star")),`<i class="fa ${firstStarClass}"></i>\n            <i class="fa ${secondStarClass}"></i>\n            <i class="fa ${thirdStarClass} mr-1"></i>\n            <span>(${reviewsnum=reviewsnum??0})</span>`};_exports.dropDownTemplate=_ref2=>{let{title:title,caption:caption,options:options,onOptionChange:onOptionChange,selectedOption:selectedOption,onReset:onReset,className:className=""}=_ref2,dropDown=$(`<div class="dropdown-container ${className}"></div>`);if(selectedOption){const resetDropdown=$("<button class='btn reset-dropdown'><i class='fa fa-times'></i></button>");resetDropdown.click(onReset),dropDown.append(resetDropdown)}dropDown.append(`\n    <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown" \n    style="width: 100%;" aria-haspopup="true" aria-expanded="false" title="${title}">\n        <div class="text-container" data-active-item-text>\n            <div class="text">${caption}</div>\n        </div>\n    </button>`);const optionsMenu=$('<div role="menu" class="dropdown-menu dropdown-menu-right list-group hidden" \n    data-show-active-item data-skip-active-class="true"></div>');return options.forEach((option=>{const disabledAttribute=null!=option&&option.disabled?"disabled":"",isActive=(null==selectedOption?void 0:selectedOption.id)===option.id,dropdownItem=$(`\n        <a class="dropdown-item ${disabledAttribute}" data-value="${option.id}" \n        aria-current="${isActive}" tabindex="-1" role="menuitem">\n            ${option.name}\n        </a>`);dropdownItem.click((()=>onOptionChange(dropdownItem.data().value))),dropdownItem.keydown((event=>event.originalEvent instanceof KeyboardEvent&&"enter"===event.key.toLocaleLowerCase()?onOptionChange(dropdownItem.data().value):null)),optionsMenu.append(dropdownItem)})),dropDown.append(optionsMenu),dropDown}}));

//# sourceMappingURL=templates.min.js.map